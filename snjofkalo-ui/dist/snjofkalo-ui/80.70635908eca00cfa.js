"use strict";(self.webpackChunksnjofkalo_ui=self.webpackChunksnjofkalo_ui||[]).push([[80],{3080:(f,l,a)=>{a.r(l),a.d(l,{CartComponent:()=>C});var s=a(177),d=a(9012),c=a(9417),t=a(4438),u=a(6042);function p(i,m){1&i&&(t.j41(0,"div",3)(1,"p"),t.EFF(2,"Your cart is empty"),t.k0s(),t.j41(3,"a",4),t.EFF(4,"Continue Shopping"),t.k0s()())}function g(i,m){if(1&i){const e=t.RV6();t.j41(0,"div",12),t.nrm(1,"img",13),t.j41(2,"div",14)(3,"h3"),t.EFF(4),t.k0s(),t.j41(5,"p",15),t.EFF(6),t.k0s(),t.j41(7,"p",16),t.EFF(8),t.nI1(9,"currency"),t.k0s(),t.j41(10,"p",17),t.EFF(11),t.k0s(),t.j41(12,"div",18)(13,"button",19),t.bIt("click",function(){const r=t.eBV(e).$implicit,o=t.XpG(2);return t.Njj(o.updateQuantity(r,r.quantity-1))}),t.EFF(14,"-"),t.k0s(),t.j41(15,"input",20),t.mxI("ngModelChange",function(r){const o=t.eBV(e).$implicit;return t.DH7(o.quantity,r)||(o.quantity=r),t.Njj(r)}),t.bIt("change",function(){const r=t.eBV(e).$implicit,o=t.XpG(2);return t.Njj(o.updateQuantity(r,r.quantity))}),t.k0s(),t.j41(16,"button",19),t.bIt("click",function(){const r=t.eBV(e).$implicit,o=t.XpG(2);return t.Njj(o.updateQuantity(r,r.quantity+1))}),t.EFF(17,"+"),t.k0s()()(),t.j41(18,"div",21)(19,"p"),t.EFF(20),t.nI1(21,"currency"),t.k0s(),t.j41(22,"button",22),t.bIt("click",function(){const r=t.eBV(e).$implicit,o=t.XpG(2);return t.Njj(o.removeItem(r))}),t.EFF(23,"Remove"),t.k0s()()()}if(2&i){const e=m.$implicit;t.R7$(),t.Y8G("src",(null==e.item.images[0]?null:e.item.images[0].imageData)||"assets/images/placeholder.jpg",t.B4B)("alt",e.item.title),t.R7$(3),t.JRh(e.item.title),t.R7$(2),t.JRh(e.item.description),t.R7$(2),t.JRh(t.i5U(9,11,e.item.price,"EUR")),t.R7$(3),t.SpI("Available: ",e.item.stockQuantity,""),t.R7$(2),t.Y8G("disabled",e.quantity<=1),t.R7$(2),t.R50("ngModel",e.quantity),t.Y8G("max",e.item.stockQuantity),t.R7$(),t.Y8G("disabled",e.quantity>=e.item.stockQuantity),t.R7$(4),t.JRh(t.i5U(21,14,e.item.price*e.quantity,"EUR"))}}function _(i,m){if(1&i&&(t.j41(0,"div",5)(1,"div",6),t.DNE(2,g,24,17,"div",7),t.k0s(),t.j41(3,"div",8)(4,"h2"),t.EFF(5,"Order Summary"),t.k0s(),t.j41(6,"div",9)(7,"span"),t.EFF(8,"Subtotal:"),t.k0s(),t.j41(9,"span"),t.EFF(10),t.nI1(11,"currency"),t.k0s()(),t.j41(12,"div",9)(13,"span"),t.EFF(14,"Shipping:"),t.k0s(),t.j41(15,"span"),t.EFF(16),t.nI1(17,"currency"),t.k0s()(),t.j41(18,"div",10)(19,"span"),t.EFF(20,"Total:"),t.k0s(),t.j41(21,"span"),t.EFF(22),t.nI1(23,"currency"),t.k0s()(),t.j41(24,"button",11),t.EFF(25,"Proceed to Checkout"),t.k0s()()()),2&i){const e=t.XpG();t.R7$(2),t.Y8G("ngForOf",e.cartItems),t.R7$(8),t.JRh(t.i5U(11,4,e.subtotal,"EUR")),t.R7$(6),t.JRh(t.i5U(17,7,e.shipping,"EUR")),t.R7$(6),t.JRh(t.i5U(23,10,e.total,"EUR"))}}let C=(()=>{class i{constructor(e){this.cartService=e,this.cartItems=[],this.subtotal=0,this.shipping=5.99}ngOnInit(){this.loadCart()}loadCart(){this.cartService.getCart().subscribe(e=>{this.cartItems=e,this.calculateSubtotal()},e=>{console.error("CartComponent - Error loading cart:",e)})}updateQuantity(e,n){n<1||n>e.item.stockQuantity||this.cartService.updateCartItem(e.idCartItem,n).subscribe({next:()=>{e.quantity=n,this.calculateSubtotal()},error:r=>{console.error("Error updating quantity:",r)}})}removeItem(e){this.cartService.removeFromCart(e.idCartItem).subscribe({next:()=>{this.cartItems=this.cartItems.filter(n=>n.idCartItem!==e.idCartItem),this.calculateSubtotal()},error:n=>{console.error("Error removing item:",n)}})}calculateSubtotal(){this.subtotal=this.cartItems.reduce((e,n)=>e+(n.itemPrice||0)*(n.quantity||0),0),console.log("CartComponent Debug - cartItems:",this.cartItems,"subtotal:",this.subtotal)}get total(){return this.subtotal+this.shipping}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(u.m))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-cart"]],standalone:!0,features:[t.aNF],decls:5,vars:2,consts:[[1,"cart-container"],["class","empty-cart",4,"ngIf"],["class","cart-content",4,"ngIf"],[1,"empty-cart"],["routerLink","/items",1,"continue-shopping"],[1,"cart-content"],[1,"cart-items"],["class","cart-item",4,"ngFor","ngForOf"],[1,"cart-summary"],[1,"summary-row"],[1,"summary-row","total"],["routerLink","/checkout",1,"checkout-btn"],[1,"cart-item"],[3,"src","alt"],[1,"item-details"],[1,"description"],[1,"price"],[1,"stock"],[1,"quantity-controls"],[3,"click","disabled"],["type","number","min","1",3,"ngModelChange","change","ngModel","max"],[1,"item-total"],[1,"remove-btn",3,"click"]],template:function(n,r){1&n&&(t.j41(0,"div",0)(1,"h1"),t.EFF(2,"Shopping Cart"),t.k0s(),t.DNE(3,p,5,0,"div",1)(4,_,26,13,"div",2),t.k0s()),2&n&&(t.R7$(3),t.Y8G("ngIf",0===r.cartItems.length),t.R7$(),t.Y8G("ngIf",r.cartItems.length>0))},dependencies:[s.MD,s.Sq,s.bT,s.oe,d.iI,d.Wk,c.YN,c.me,c.Q0,c.BC,c.VZ,c.zX,c.vS],styles:[".cart-container[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto}.empty-cart[_ngcontent-%COMP%]{text-align:center;padding:3rem}.continue-shopping[_ngcontent-%COMP%]{display:inline-block;margin-top:1rem;padding:.75rem 1.5rem;background-color:#3498db;color:#fff;text-decoration:none;border-radius:4px}.cart-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:2rem}.cart-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.cart-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:100px 1fr auto;gap:1rem;padding:1rem;border:1px solid #ddd;border-radius:8px}.cart-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:cover;border-radius:4px}.item-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.description[_ngcontent-%COMP%]{color:#666;font-size:.9rem;margin:.5rem 0}.stock[_ngcontent-%COMP%]{color:#27ae60;font-size:.9rem}.price[_ngcontent-%COMP%]{color:#2c3e50;font-weight:700;font-size:1.1rem}.quantity-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.quantity-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30px;height:30px;border:1px solid #ddd;background-color:#fff;border-radius:4px;cursor:pointer}.quantity-controls[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60px;text-align:center;border:1px solid #ddd;border-radius:4px;padding:.25rem}.item-total[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:.5rem}.remove-btn[_ngcontent-%COMP%]{padding:.5rem;background-color:#e74c3c;color:#fff;border:none;border-radius:4px;cursor:pointer}.cart-summary[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:1.5rem;border-radius:8px;height:-moz-fit-content;height:fit-content}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:1rem 0}.summary-row.total[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;border-top:1px solid #ddd;padding-top:1rem;margin-top:1rem}.checkout-btn[_ngcontent-%COMP%]{width:100%;padding:1rem;background-color:#2ecc71;color:#fff;border:none;border-radius:4px;font-size:1.1rem;cursor:pointer;margin-top:1rem}@media (max-width: 768px){.cart-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return i})()}}]);