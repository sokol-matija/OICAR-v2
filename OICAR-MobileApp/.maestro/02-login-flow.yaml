appId: com.oicar.mobileapp
---
# ðŸ§ª E2E Test: User Login Flow
# Tests: Authentication UI â†’ JWT API â†’ Session Management

- launchApp
- assertVisible: "OICAR"

# Navigate to login screen
- tapOn: "Login"
- assertVisible: "Sign In"

# Use existing test credentials (created by registration test)
- tapOn: "Username"
- inputText: "testuser_1234"  # Use known test user
- tapOn: "Password"
- inputText: "TestPassword123"

# Submit login (triggers API authentication)
- tapOn: "Sign In"

# Wait for authentication response
- assertVisible:
    text: "Login successful"
    timeout: 8000

# Verify JWT token received and stored
- assertVisible: "Dashboard"
- assertVisible: "Welcome back"

# Verify authenticated features available
- assertVisible: "Browse Items"
- assertVisible: "My Cart"
- assertVisible: "My Profile"
- assertVisible: "Logout"

# Test navigation with authenticated state
- tapOn: "My Profile"
- assertVisible: "Profile Information"
- assertVisible: "testuser_1234"

# Return to dashboard
- tapOn: "Back"
- assertVisible: "Dashboard"

---
# ðŸŽ¯ What this test validates:
# âœ… Login form UI functionality
# âœ… HTTP request to .NET API (/api/auth/login)
# âœ… JWT token authentication flow
# âœ… Token storage in device secure storage
# âœ… Authenticated state management
# âœ… Protected routes accessibility
# âœ… User session persistence
# âœ… Navigation between authenticated screens 