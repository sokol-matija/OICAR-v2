appId: host.exp.exponent
---
# ðŸ§ª E2E Test: Complete Purchase Flow
# Tests: Full e-commerce transaction â†’ Payment API â†’ Order persistence

- launchApp
- waitForAnimationToEnd

# âœ… SUCCESS: App launched successfully
- assertVisible: "ðŸ§ª Fill Test Credentials"

# Ensure user is logged in with items in cart
- tapOn: 
    id: "fill-test-credentials-button"
- waitForAnimationToEnd

# âœ… SUCCESS: Test credentials filled (msokol/123456)
- tapOn: 
    id: "login-submit-button"
- waitForAnimationToEnd

# âœ… SUCCESS: Login completed
- assertVisible: "ðŸŽ‰ Welcome to Snjofkalo!"

# Add item to cart first
- tapOn: 
    id: "nav-tab-products"
- waitForAnimationToEnd

# âœ… SUCCESS: Navigated to products catalog
- tapOn:
    text: "View Details"
    index: 0
- waitForAnimationToEnd

# âœ… SUCCESS: Product details opened
- tapOn: "Add to Cart"
- waitForAnimationToEnd

# âœ… SUCCESS: Product added to cart
- assertVisible: "Added to cart"

# Navigate to cart and initiate checkout
- tapOn: 
    id: "nav-tab-cart"
- waitForAnimationToEnd

# âœ… SUCCESS: Opened shopping cart
- assertVisible: "Cart"
- tapOn: "Checkout"
- waitForAnimationToEnd

# âœ… SUCCESS: Checkout process initiated
- assertVisible: "Checkout"

# Fill shipping details
- tapOn: "Address"
- inputText: "123 Test Street"

# âœ… SUCCESS: Street address entered
- tapOn: "City"
- inputText: "Test City"

# âœ… SUCCESS: City entered
- tapOn: "ZIP"
- inputText: "12345"

# âœ… SUCCESS: ZIP code entered
# Payment information
- scroll
- waitForAnimationToEnd

# âœ… SUCCESS: Scrolled to payment section
- tapOn: "Card Number"
- inputText: "4111111111111111"  # Test card number

# âœ… SUCCESS: Card number entered
- tapOn: "Expiry"
- inputText: "12/25"

# âœ… SUCCESS: Expiry date entered
- tapOn: "CVV"
- inputText: "123"

# âœ… SUCCESS: CVV entered
# Review order before submission
- scroll
- waitForAnimationToEnd

# âœ… SUCCESS: Scrolled to order summary
- assertVisible: "Total"

# Submit order (triggers payment API)
- tapOn: "Place Order"

# âœ… SUCCESS: Order placement initiated
- waitForAnimationToEnd:
    timeout: 15000

# âœ… SUCCESS: Payment processing completed
# Verify order confirmation
- assertVisible: "Order Confirmation"
- assertVisible: "Thank you"

# âœ… SUCCESS: Order confirmation received
# Navigate to order history if available
- tapOn: "View Orders"
- waitForAnimationToEnd

# âœ… SUCCESS: Navigated to order history
- assertVisible: "Orders"

# Return to home
- tapOn: 
    id: "nav-tab-home"
- waitForAnimationToEnd

# âœ… SUCCESS: Returned to home
- assertVisible: "ðŸŽ‰ Welcome to Snjofkalo!"

# Verify cart is now empty
- tapOn: 
    id: "nav-tab-cart"
- waitForAnimationToEnd

# âœ… SUCCESS: Cart should be cleared after purchase
- assertVisible: "Cart"

# âœ… SUCCESS: Complete purchase flow validated
- tapOn: 
    id: "nav-tab-home"
- waitForAnimationToEnd

---
# ðŸŽ¯ What this test validates:
# âœ… Complete e-commerce checkout flow
# âœ… Order API endpoints integration  
# âœ… Order creation in Azure SQL Database
# âœ… Payment processing simulation
# âœ… Shipping address validation
# âœ… Order confirmation process
# âœ… Navigation between checkout screens
# âœ… Cart state management after purchase 