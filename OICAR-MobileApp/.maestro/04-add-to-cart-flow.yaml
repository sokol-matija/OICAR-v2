appId: com.oicar.mobileapp
---
# ðŸ§ª E2E Test: Add to Cart Flow
# Tests: Cart functionality â†’ API persistence â†’ User state

- launchApp
- assertVisible: "OICAR"

# Ensure user is logged in
- tapOn: "Login"
- inputText: "testuser_1234"
- tapOn: "Password"
- inputText: "TestPassword123"
- tapOn: "Sign In"
- assertVisible: "Dashboard"

# Navigate to marketplace
- tapOn: "Browse Items"
- assertVisible: "Marketplace"

# Select first available item
- tapOn:
    text: "View Details"
    index: 0
- assertVisible: "Item Details"
- assertVisible: "Add to Cart"

# Add item to cart (triggers API call)
- tapOn: "Add to Cart"
- assertVisible:
    text: "Added to cart"
    timeout: 5000

# Verify cart badge/counter updated
- assertVisible: "1"  # Cart item count

# Navigate to cart
- tapOn: "Back"
- tapOn: "My Cart"
- assertVisible: "Shopping Cart"

# Verify item appears in cart
- assertVisible: "1 item"
- assertVisible: "Total:"
- assertVisible: "$"
- assertVisible: "Remove"
- assertVisible: "Quantity"

# Test quantity adjustment
- tapOn: "+"
- assertVisible: "2"  # Quantity increased
- assertVisible: "2 items"

- tapOn: "-"
- assertVisible: "1"  # Quantity decreased

# Test item removal
- tapOn: "Remove"
- assertVisible:
    text: "Item removed"
    timeout: 3000
- assertVisible: "Your cart is empty"

# Add multiple items
- tapOn: "Continue Shopping"
- tapOn:
    text: "Add to Cart"
    index: 0
- assertVisible: "Added to cart"

- tapOn: "Back"
- tapOn:
    text: "View Details"
    index: 1
- tapOn: "Add to Cart"
- assertVisible: "Added to cart"

# Verify multiple items in cart
- tapOn: "My Cart"
- assertVisible: "2 items"
- assertVisible: "Subtotal:"
- assertVisible: "Proceed to Checkout"

---
# ðŸŽ¯ What this test validates:
# âœ… Cart API endpoints (/api/cart/items) integration
# âœ… Real cart data persistence in Azure SQL
# âœ… User authentication state for cart operations
# âœ… Quantity management and calculations
# âœ… Item removal functionality
# âœ… Cart state synchronization across screens
# âœ… Multiple items handling
# âœ… Real-time price calculations 